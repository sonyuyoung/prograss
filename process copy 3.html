<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      #process_wrap {
        display: flex;
        width: 100%;
        justify-content: center;
        min-height: 100vh;
        background: #363636;
      }
      .process_container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 40px;
      }
      .process_container .circle {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        width: 250px;
        height: 250px;
        border-radius: 50%;
        background: #222;
        opacity: 0; /* 초기 상태에서는 숨깁니다 */
        transition: opacity 0.5s; /* 부드러운 전환을 위한 설정 */
      }
      .process_container .circle::before {
        content: "";
        position: absolute;
        inset: 5px;
        border-radius: 50%;
        background: #222;
        opacity: 0.8;
      }
      .process_container .circle::after {
        content: "";
        position: absolute;
        width: 180px;
        height: 180px;
        background: #333;
        border: 15px solid #4d4c51;
        border-radius: 50%;
        box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.25),
          0 10px 10px rgba(0, 0, 0, 0.75), 0 -2px 2px rgba(255, 255, 255, 0.5),
          inset 0 4px 2px rgba(0, 0, 0, 0.25),
          inset 0 -2px 2px rgba(255, 255, 255, 0.5);
      }
      .process_container .circle .number {
        position: relative;
        color: #fff;
        z-index: 10;
        line-height: 1em;
        font-size: 3em;
      }
      .process_container .circle h4 {
        position: relative;
        color: #fff;
        z-index: 10;
        font-weight: 500;
        font-size: 1.2em;
        line-height: 0.8em;
      }
      .process_container .circle .number span {
        font-size: 0.5em;
        font-weight: 500;
      }
      .active {
        opacity: 1; /* 활성화 시 보이도록 설정 */
      }
    </style>
  </head>
  <body>
    <div id="process_wrap" class="reveal">
      <div class="process_container">
        <div class="circle" data-degree="37" data-color="#ff2972">
          <h2 class="number">37</h2>
          <h4>임플란트 주의염</h4>
        </div>
        <div class="circle" data-degree="26" data-color="#ff2972">
          <h2 class="number">26<span>%</span></h2>
          <h4>픽스쳐 탈락, 파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>보철물 탈착,파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#fee800">
          <h2 class="number">9<span>%</span></h2>
          <h4>교합 불편감</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>기타</h4>
        </div>
      </div>
    </div>
    <div id="process_wrap" class="reveal">
      <div class="process_container">
        <div class="circle" data-degree="37" data-color="#ff2972">
          <h2 class="number">37</h2>
          <h4>임플란트 주의염</h4>
        </div>
        <div class="circle" data-degree="26" data-color="#ff2972">
          <h2 class="number">26<span>%</span></h2>
          <h4>픽스쳐 탈락, 파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>보철물 탈착,파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#fee800">
          <h2 class="number">9<span>%</span></h2>
          <h4>교합 불편감</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>기타</h4>
        </div>
      </div>
    </div>
    <div id="process_wrap" class="reveal">
      <div class="process_container">
        <div class="circle" data-degree="37" data-color="#ff2972">
          <h2 class="number">37</h2>
          <h4>임플란트 주의염</h4>
        </div>
        <div class="circle" data-degree="26" data-color="#ff2972">
          <h2 class="number">26<span>%</span></h2>
          <h4>픽스쳐 탈락, 파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>보철물 탈착,파손</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#fee800">
          <h2 class="number">9<span>%</span></h2>
          <h4>교합 불편감</h4>
        </div>
        <div class="circle" data-degree="9" data-color="#04fc43">
          <h2 class="number">9<span>%</span></h2>
          <h4>기타</h4>
        </div>
      </div>
    </div>
    <script>
      // 스크롤 이벤트가 발생할 때 reveal 함수 호출
      window.addEventListener("scroll", reveal);

      // 요소가 화면에 나타날 때 애니메이션을 실행하는 함수
      function reveal() {
        // 모든 .circle 클래스를 가진 요소를 선택
        var reveals = document.querySelectorAll(".circle");
        // 브라우저 창의 높이
        var windowHeight = window.innerHeight;
        // 스크롤 위치를 확인할 포인트 설정
        var revealPoint = 200;

        // 각 .circle 요소를 순회
        for (var i = 0; i < reveals.length; i++) {
          // 요소의 상단 위치를 계산
          var revealTop = reveals[i].getBoundingClientRect().top;

          // 요소가 화면에 나타나면
          if (revealTop < windowHeight - revealPoint) {
            // .active 클래스를 추가하여 애니메이션 시작
            reveals[i].classList.add("active");
            // 원의 애니메이션을 실행
            animateCircle(reveals[i]);
          } else {
            // 요소가 화면에서 사라지면 .active 클래스를 제거
            reveals[i].classList.remove("active");
          }
        }
      }

      // 원의 애니메이션을 실행하는 함수
      function animateCircle(circle) {
        let degree = 0; // 현재 각도
        // 데이터 속성에서 목표 각도를 가져옴
        let targetDegree = parseInt(circle.getAttribute("data-degree"), 10);
        // 데이터 속성에서 색상을 가져옴
        let color = circle.getAttribute("data-color");
        // 원 안의 숫자를 포함하는 요소 선택
        let number = circle.querySelector(".number");

        // 50ms마다 실행되는 인터벌 설정
        let interval = setInterval(function () {
          degree += 1; // 각도 증가
          // 목표 각도를 초과하면 인터벌 종료
          if (degree > targetDegree) {
            clearInterval(interval);
            degree = targetDegree; // 각도를 목표 값으로 설정
          }
          // 원의 배경을 conic-gradient로 설정
          circle.style.background = `conic-gradient(${color} ${degree}%, #222 0%)`;
          // 숫자의 색상을 데이터에서 가져온 색상으로 설정
          number.style.color = color;
        }, 50);
      }

      // 페이지가 로드될 때 한 번 reveal 함수를 호출하여 초기 상태를 설정
      document.addEventListener("DOMContentLoaded", reveal);
    </script>
  </body>
</html>
